<!DOCTYPE html>
<html>
  <body>
    <h1>Zetrix Wallet Integration (TEST)</h1>

  </body>
  <script type="module">
    import ZetrixWalletConnect from "https://cdn.skypack.dev/zetrix-connect-wallet-sdk@1.1.3";
    
    const options = {
      bridge: 'wss://test-wscw.zetrix.com'
    }

    var zetrixConnect = new ZetrixWalletConnect({
      qrcode: false,
    });
    
    zetrixConnect.connect(options);
    
    const sign = () => {
      document.getElementById("test3").innerHTML = "Signing Now";
      zetrixConnect.signMessage({ message: "Click \"Sign\" to sign in. No password needed!\nThis request will not trigger a blockchain transaction or cost any gas fees.\nWalletAddress:\nZTX3eKfykPRZuQJFW3qFt38nhru9bmoEzCGtP\nblob:\nd05fa5d0f9e744a84137d51f87ef658d16cc51d902f017ead58957434a62ae97" })
        .then((res) => {
          document.getElementById("test3").innerHTML = JSON.stringify(res);
          console.log(JSON.stringify(res));
        })
        .catch((e) => console.log('ERROR: ' + JSON.stringify(e)));
    };

    const test = () => {
      document.getElementById("test").innerHTML = "Calling Auth";
      zetrixConnect
        .auth()
        .then((res) => {
        Flutter.postMessage(JSON.stringify(res));
        document.getElementById("test2").innerHTML = JSON.stringify(res);
        console.log(res);
      })
        .catch((e) => {
          console.log(e);
          document.getElementById("test2").innerHTML = JSON.stringify(e);
        });
    };
    
    signMessage.addEventListener('click', () => {
      sign();
      console.log('sign message clicked');
    });
    
    connectWallet.addEventListener('click', () => {
      test();
      console.log('connect wallet clicked');
    });

  </script>
  <span id="test">No Update</span
  ><br />
  <span id="test2">No Update</span>
  <br />
  <span id="test3">No Update</span>
  <br />
  <button id="signMessage">Sign</button>
  <br />
  <button id="connectWallet">Auth Wallet</button>
</html>
